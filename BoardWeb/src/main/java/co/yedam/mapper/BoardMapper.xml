<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.yedam.mapper.BoardMapper">

	<!-- 쿼리문 작성시 ;꼭 빼주기 -->
	<!-- 목록 조회 쿼리 -->
	<select id="boardList" resultType="co.yedam.vo.BoardVO">
	  select *
	  from board_tbl
	  order by board_no
	</select>
	
	
	<!-- 한페이지 5건씩 조회 -->
	<select id="boardListPaging" parameterType="int" resultType="co.yedam.vo.BoardVO">
	<!-- 꺽새를 쓸 때에는 <![CDATA[]]>를 써준다. -->
	
	  select b.*
	  from   (select rownum rn, a.*
	          from  (select *
	                 from board_tbl
	                 order by board_no) a
	          <![CDATA[
	          where rownum <= (#{page} * 5) ) b
	          ]]>
	  where b.rn > (#{page} - 1) * 5
	</select>
	
	
	<select id="getTotalCnt" resultType="int">
	  select count(1)
	  from board_tbl
	</select>
	
	
	
	<!-- 단건 조회 -->
	<select id="selectBoard" parameterType="int" resultType="co.yedam.vo.BoardVO">
	  select board_no,
             title,
             content,
             writer,
             click_cnt,
             creation_date
	  from board_tbl
	  where board_no = #{bno}
	  <!-- boardNo -->
	</select>
	
	<!-- 등록 -->
	<insert id="insertBoard" parameterType="co.yedam.vo.BoardVO">
	  insert into board_tbl(board_no, title, content, writer) <!-- 컬럼명 -->
	  values(#{boardNo}, #{title}, #{content}, #{writer}) <!-- 필드명 -->
	</insert>
	
	<!-- 수정 -->
	<update id="updateBoard" parameterType="co.yedam.vo.BoardVO">
	  update board_tbl set content = #{content} where board_no = #{boardNo}
	</update>
	
	<!-- 삭제 -->
	<delete id="deleteBoard" parameterType="co.yedam.vo.BoardVO">
		delete from board_tbl where board_no = #{boardNo}
	</delete>


</mapper>